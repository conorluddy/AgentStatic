/* components/atoms/icon/icon.css */

/**
 * Icon Atom Component
 *
 * SVG-based icon wrapper for consistent icon usage across the design system.
 * Supports inline SVG icons with size variants, color customization, and
 * icon-in-circle styling common in marketing/brochureware sites.
 *
 * Component-scoped naming convention (NOT BEM):
 * - Base: .icon
 * - Variants: .icon-xs, .icon-sm, .icon-md, .icon-lg, .icon-xl, .icon-2xl
 * - Circle variant: .icon-circle
 *
 * Pure CSS only - no preprocessors.
 * Uses design tokens from components/_system/tokens.css
 */

@layer components {
  /* ============================================
     Base Icon Styles
     ============================================ */
  .icon {
    /* Layout */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;

    /* Size - default md (24x24px) */
    width: var(--icon-size, 1.5rem);
    height: var(--icon-size, 1.5rem);

    /* Color - inherits currentColor by default */
    color: var(--icon-color, currentColor);

    /* SVG styling */
    fill: currentColor;
    stroke: none;

    /* Prevent text selection on icons */
    user-select: none;

    /* Smooth transitions for interactive icons */
    transition: color var(--transition-base),
                background-color var(--transition-base),
                transform var(--transition-base);
  }

  /* SVG element inside icon wrapper */
  .icon svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* ============================================
     Size Variants
     ============================================ */

  .icon-xs {
    --icon-size: 0.75rem; /* 12px */
  }

  .icon-sm {
    --icon-size: 1rem; /* 16px */
  }

  .icon-md {
    --icon-size: 1.5rem; /* 24px - default */
  }

  .icon-lg {
    --icon-size: 2rem; /* 32px */
  }

  .icon-xl {
    --icon-size: 2.5rem; /* 40px */
  }

  .icon-2xl {
    --icon-size: 3rem; /* 48px */
  }

  /* ============================================
     Color Variants
     ============================================ */

  .icon-primary {
    --icon-color: var(--color-primary);
  }

  .icon-secondary {
    --icon-color: var(--color-secondary);
  }

  .icon-accent {
    --icon-color: var(--color-accent);
  }

  .icon-success {
    --icon-color: var(--color-success);
  }

  .icon-warning {
    --icon-color: var(--color-warning);
  }

  .icon-error {
    --icon-color: var(--color-error);
  }

  .icon-muted {
    --icon-color: var(--color-text-muted);
  }

  .icon-white {
    --icon-color: white;
  }

  /* ============================================
     Circle Variant (Marketing Pattern)
     ============================================ */

  .icon-circle {
    /* Circular background */
    border-radius: 50%;
    padding: var(--icon-circle-padding, 0.75rem);
    background-color: var(--icon-circle-bg, var(--color-background-secondary));

    /* Increase size to account for padding */
    --icon-size: 1.5rem; /* Icon size inside circle */
  }

  /* Circle sizes account for padding */
  .icon-circle.icon-xs {
    --icon-size: 0.75rem;
    --icon-circle-padding: 0.375rem; /* 6px */
  }

  .icon-circle.icon-sm {
    --icon-size: 1rem;
    --icon-circle-padding: 0.5rem; /* 8px */
  }

  .icon-circle.icon-md {
    --icon-size: 1.5rem;
    --icon-circle-padding: 0.75rem; /* 12px */
  }

  .icon-circle.icon-lg {
    --icon-size: 2rem;
    --icon-circle-padding: 1rem; /* 16px */
  }

  .icon-circle.icon-xl {
    --icon-size: 2.5rem;
    --icon-circle-padding: 1.25rem; /* 20px */
  }

  .icon-circle.icon-2xl {
    --icon-size: 3rem;
    --icon-circle-padding: 1.5rem; /* 24px */
  }

  /* Circle with primary color background */
  .icon-circle-primary {
    --icon-circle-bg: var(--color-primary);
    --icon-color: white;
  }

  .icon-circle-secondary {
    --icon-circle-bg: var(--color-secondary);
    --icon-color: white;
  }

  .icon-circle-accent {
    --icon-circle-bg: var(--color-accent);
    --icon-color: white;
  }

  .icon-circle-success {
    --icon-circle-bg: var(--color-success);
    --icon-color: white;
  }

  /* Light circle variants (tinted backgrounds) */
  .icon-circle-primary-light {
    --icon-circle-bg: color-mix(in srgb, var(--color-primary) 10%, transparent);
    --icon-color: var(--color-primary);
  }

  .icon-circle-secondary-light {
    --icon-circle-bg: color-mix(in srgb, var(--color-secondary) 10%, transparent);
    --icon-color: var(--color-secondary);
  }

  .icon-circle-accent-light {
    --icon-circle-bg: color-mix(in srgb, var(--color-accent) 10%, transparent);
    --icon-color: var(--color-accent);
  }

  /* ============================================
     Interactive States
     ============================================ */

  /* Clickable icons */
  button.icon,
  a.icon,
  .icon[role="button"] {
    cursor: pointer;
  }

  /* Hover states for interactive icons */
  button.icon:hover,
  a.icon:hover,
  .icon[role="button"]:hover {
    opacity: 0.8;
  }

  /* Focus states */
  button.icon:focus-visible,
  a.icon:focus-visible,
  .icon[role="button"]:focus-visible {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  /* Active state */
  button.icon:active,
  a.icon:active,
  .icon[role="button"]:active {
    transform: scale(0.95);
  }

  /* Disabled state */
  button.icon:disabled,
  .icon[aria-disabled="true"] {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* ============================================
     Dark Mode
     ============================================ */

  @media (prefers-color-scheme: dark) {
    .icon-circle {
      /* Darker background in dark mode */
      --icon-circle-bg: var(--color-background-tertiary);
    }

    /* Light circle variants adjust for dark mode */
    .icon-circle-primary-light {
      --icon-circle-bg: color-mix(in srgb, var(--color-primary) 20%, transparent);
    }

    .icon-circle-secondary-light {
      --icon-circle-bg: color-mix(in srgb, var(--color-secondary) 20%, transparent);
    }

    .icon-circle-accent-light {
      --icon-circle-bg: color-mix(in srgb, var(--color-accent) 20%, transparent);
    }
  }

  /* ============================================
     Accessibility
     ============================================ */

  /* Decorative icons (aria-hidden) shouldn't be focusable */
  .icon[aria-hidden="true"] {
    pointer-events: none;
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .icon {
      transition: none;
    }

    button.icon:active,
    a.icon:active,
    .icon[role="button"]:active {
      transform: none;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .icon-circle {
      border: 2px solid currentColor;
    }
  }
}
