<!-- components/atoms/divider/divider.njk -->

{#
  Divider Component

  Description: A flexible visual separator for content sections, supporting
  horizontal/vertical orientations, multiple line styles, text/icon decorations,
  and gradient effects.

  Props:
    - orientation (string): 'horizontal' or 'vertical' (default: 'horizontal')
    - variant (string): 'solid', 'dashed', 'dotted', 'gradient', 'section', 'spacer' (default: 'solid')
    - thickness (string): 'thin', 'medium', 'thick' (default: 'thin')
    - color (string): 'default', 'primary', 'muted' (default: 'default')
    - spacing (string): 'none', 'sm', 'md', 'lg' (default: 'md')
    - withText (string): Text to display in center of divider
    - withIcon (string): Icon HTML/SVG to display in center
    - textAlign (string): 'left', 'center', 'right' (default: 'center')
    - id (string): Unique identifier for the component
    - className (string): Additional CSS classes
    - attributes (object): Additional HTML attributes
    - a11y (object): Accessibility properties
      - ariaLabel (string): Accessible label
      - role (string): ARIA role override (default: 'separator')

  Usage:
    {% from "atoms/divider/divider.njk" import divider %}

    <!-- Simple horizontal divider -->
    {{ divider() }}

    <!-- Vertical divider -->
    {{ divider({ orientation: 'vertical' }) }}

    <!-- Dashed divider -->
    {{ divider({ variant: 'dashed' }) }}

    <!-- Divider with text ("or" between login options) -->
    {{ divider({ withText: 'or' }) }}

    <!-- Gradient divider -->
    {{ divider({ variant: 'gradient' }) }}

    <!-- Section divider (thick with large spacing) -->
    {{ divider({ variant: 'section' }) }}

    <!-- Spacer (invisible) -->
    {{ divider({ variant: 'spacer', spacing: 'xl' }) }}
#}

{% macro divider(props = {}) %}
  {% set defaults = {
    orientation: 'horizontal',
    variant: 'solid',
    thickness: 'thin',
    color: 'default',
    spacing: 'md',
    withText: '',
    withIcon: '',
    textAlign: 'center',
    className: '',
    attributes: {},
    a11y: {
      role: 'separator'
    }
  } %}

  {% set config = defaults | merge(props) %}

  <!-- Determine if this is a text/icon divider -->
  {% set hasContent = config.withText or config.withIcon %}

  <!-- Build class list -->
  {% set classList = [
    'divider',
    'divider-' + config.orientation,
    'divider-' + config.variant if not hasContent,
    'divider-' + config.thickness,
    'divider-' + config.color,
    'divider-spacing-' + config.spacing,
    'divider-with-content' if hasContent,
    'divider-align-' + config.textAlign if hasContent,
    config.className
  ] | join(' ') | trim %}

  {# Determine semantic element:
     - <hr> for simple horizontal dividers
     - <div> for vertical or complex dividers with content
  #}
  {% if config.orientation == 'horizontal' and not hasContent %}
    <hr
      class="{{ classList }}"
      {% if config.id %}id="{{ config.id }}"{% endif %}
      {% if config.a11y.role %}role="{{ config.a11y.role }}"{% endif %}
      {% if config.a11y.ariaLabel %}aria-label="{{ config.a11y.ariaLabel }}"{% endif %}
      {% if config.orientation == 'vertical' %}aria-orientation="vertical"{% else %}aria-orientation="horizontal"{% endif %}
      {% for key, value in config.attributes %}
        {{ key }}="{{ value }}"
      {% endfor %}
    >
  {% else %}
    <div
      class="{{ classList }}"
      {% if config.id %}id="{{ config.id }}"{% endif %}
      {% if config.a11y.role %}role="{{ config.a11y.role }}"{% endif %}
      {% if config.a11y.ariaLabel %}aria-label="{{ config.a11y.ariaLabel }}"{% endif %}
      {% if config.orientation == 'vertical' %}aria-orientation="vertical"{% else %}aria-orientation="horizontal"{% endif %}
      {% for key, value in config.attributes %}
        {{ key }}="{{ value }}"
      {% endfor %}
    >
      {% if config.withText %}
        <span class="divider-text">{{ config.withText }}</span>
      {% endif %}
      {% if config.withIcon %}
        <span class="divider-icon">{{ config.withIcon | safe }}</span>
      {% endif %}
    </div>
  {% endif %}
{% endmacro %}
