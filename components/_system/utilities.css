/**
 * UTILITY CLASSES
 *
 * Purpose: Provides helper classes for common styling needs.
 * These classes are in the `utilities` layer, giving them higher
 * priority than component styles but lower than user overrides.
 *
 * Philosophy:
 * - Single-purpose classes for quick adjustments
 * - Use sparingly (prefer component composition)
 * - Focus on accessibility and layout helpers
 * - All utilities use design tokens
 *
 * Note: These are foundational utilities. More can be added as needed
 * during component development.
 */

@layer utilities {
  /**
   * Accessibility Utilities
   */

  /* Screen reader only - visually hidden but accessible to screen readers */
  .sr-only {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Visually hidden - completely hidden from all users */
  .visually-hidden {
    display: none !important;
  }

  /* Skip to main content link (for keyboard navigation) */
  .skip-to-main {
    position: absolute;
    inset-block-start: -999px;
    inset-inline-start: -999px;
  }

  .skip-to-main:focus {
    position: fixed;
    inset-block-start: var(--spacing-md, 1rem);
    inset-inline-start: var(--spacing-md, 1rem);
    z-index: var(--z-modal, 1050);
    padding: var(--spacing-sm, 0.5rem) var(--spacing-md, 1rem);
    background: var(--color-surface, #ffffff);
    color: var(--color-text, #212529);
    border: 2px solid var(--color-primary-500, #0066cc);
    border-radius: var(--radius-md, 0.375rem);
    box-shadow: var(--shadow-lg, 0 10px 15px rgba(0, 0, 0, 0.1));
  }

  /**
   * Text Alignment
   */
  .text-start {
    text-align: start;
  }

  .text-center {
    text-align: center;
  }

  .text-end {
    text-align: end;
  }

  /**
   * Display Utilities
   */
  .block {
    display: block;
  }

  .inline-block {
    display: inline-block;
  }

  .flex {
    display: flex;
  }

  .inline-flex {
    display: inline-flex;
  }

  .grid {
    display: grid;
  }

  /**
   * Responsive Display Utilities
   * Show/hide elements at different breakpoints
   */
  .hide-on-mobile {
    display: none;
  }

  @media (min-width: 768px) {
    .hide-on-mobile {
      display: initial;
    }

    .hide-on-tablet {
      display: none;
    }
  }

  @media (min-width: 1440px) {
    .hide-on-tablet {
      display: initial;
    }

    .hide-on-desktop {
      display: none;
    }
  }

  /**
   * Container Utility
   * Max-width container with responsive padding
   */
  .container {
    inline-size: 100%;
    max-inline-size: 1440px;
    margin-inline: auto;
    padding-inline: var(--spacing-lg, 1.5rem);
  }

  @media (min-width: 768px) {
    .container {
      padding-inline: var(--spacing-2xl, 3rem);
    }
  }

  @media (min-width: 1440px) {
    .container {
      padding-inline: var(--spacing-3xl, 4rem);
    }
  }

  /**
   * Spacing Utilities
   * Margin and padding helpers (use sparingly!)
   */

  /* Margin Block (vertical) */
  .mb-0 { margin-block-end: 0; }
  .mb-xs { margin-block-end: var(--spacing-xs, 0.25rem); }
  .mb-sm { margin-block-end: var(--spacing-sm, 0.5rem); }
  .mb-md { margin-block-end: var(--spacing-md, 1rem); }
  .mb-lg { margin-block-end: var(--spacing-lg, 1.5rem); }
  .mb-xl { margin-block-end: var(--spacing-xl, 2rem); }
  .mb-2xl { margin-block-end: var(--spacing-2xl, 3rem); }

  .mt-0 { margin-block-start: 0; }
  .mt-xs { margin-block-start: var(--spacing-xs, 0.25rem); }
  .mt-sm { margin-block-start: var(--spacing-sm, 0.5rem); }
  .mt-md { margin-block-start: var(--spacing-md, 1rem); }
  .mt-lg { margin-block-start: var(--spacing-lg, 1.5rem); }
  .mt-xl { margin-block-start: var(--spacing-xl, 2rem); }
  .mt-2xl { margin-block-start: var(--spacing-2xl, 3rem); }

  /* Margin Inline (horizontal) */
  .ms-auto { margin-inline-start: auto; }
  .me-auto { margin-inline-end: auto; }
  .mx-auto { margin-inline: auto; }

  /* Padding */
  .p-0 { padding: 0; }
  .p-sm { padding: var(--spacing-sm, 0.5rem); }
  .p-md { padding: var(--spacing-md, 1rem); }
  .p-lg { padding: var(--spacing-lg, 1.5rem); }
  .p-xl { padding: var(--spacing-xl, 2rem); }

  /**
   * Width Utilities
   */
  .w-full {
    inline-size: 100%;
  }

  .w-auto {
    inline-size: auto;
  }

  /**
   * Max-Width Utilities
   * Useful for constraining content width
   */
  .max-w-prose {
    max-inline-size: 65ch;
  }

  .max-w-narrow {
    max-inline-size: 40rem;
  }

  .max-w-medium {
    max-inline-size: 60rem;
  }

  .max-w-wide {
    max-inline-size: 80rem;
  }

  /**
   * Flex Utilities
   */
  .flex-row {
    flex-direction: row;
  }

  .flex-column {
    flex-direction: column;
  }

  .flex-wrap {
    flex-wrap: wrap;
  }

  .flex-nowrap {
    flex-wrap: nowrap;
  }

  .items-start {
    align-items: flex-start;
  }

  .items-center {
    align-items: center;
  }

  .items-end {
    align-items: flex-end;
  }

  .justify-start {
    justify-content: flex-start;
  }

  .justify-center {
    justify-content: center;
  }

  .justify-end {
    justify-content: flex-end;
  }

  .justify-between {
    justify-content: space-between;
  }

  .gap-xs { gap: var(--spacing-xs, 0.25rem); }
  .gap-sm { gap: var(--spacing-sm, 0.5rem); }
  .gap-md { gap: var(--spacing-md, 1rem); }
  .gap-lg { gap: var(--spacing-lg, 1.5rem); }
  .gap-xl { gap: var(--spacing-xl, 2rem); }

  /**
   * Grid Utilities
   */
  .grid-cols-1 {
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .grid-cols-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  @media (min-width: 768px) {
    .md\\:grid-cols-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .md\\:grid-cols-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .md\\:grid-cols-4 {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
  }

  /**
   * Border Radius Utilities
   */
  .rounded-none {
    border-radius: 0;
  }

  .rounded-sm {
    border-radius: var(--radius-sm, 0.25rem);
  }

  .rounded-md {
    border-radius: var(--radius-md, 0.375rem);
  }

  .rounded-lg {
    border-radius: var(--radius-lg, 0.5rem);
  }

  .rounded-full {
    border-radius: var(--radius-full, 9999px);
  }

  /**
   * Shadow Utilities
   */
  .shadow-none {
    box-shadow: none;
  }

  .shadow-sm {
    box-shadow: var(--shadow-sm);
  }

  .shadow-md {
    box-shadow: var(--shadow-md);
  }

  .shadow-lg {
    box-shadow: var(--shadow-lg);
  }

  /**
   * Interactive Utilities
   */
  .pointer {
    cursor: pointer;
  }

  .not-allowed {
    cursor: not-allowed;
  }

  /**
   * Overflow Utilities
   */
  .overflow-hidden {
    overflow: hidden;
  }

  .overflow-auto {
    overflow: auto;
  }

  .overflow-scroll {
    overflow: scroll;
  }

  /**
   * Position Utilities
   */
  .relative {
    position: relative;
  }

  .absolute {
    position: absolute;
  }

  .fixed {
    position: fixed;
  }

  .sticky {
    position: sticky;
  }

  /**
   * Z-Index Utilities
   */
  .z-base {
    z-index: var(--z-base, 0);
  }

  .z-dropdown {
    z-index: var(--z-dropdown, 1000);
  }

  .z-modal {
    z-index: var(--z-modal, 1050);
  }

  /**
   * Animation Utilities
   */
  .transition-fast {
    transition: all var(--transition-fast, 150ms);
  }

  .transition-base {
    transition: all var(--transition-base, 250ms);
  }

  .transition-slow {
    transition: all var(--transition-slow, 350ms);
  }

  /**
   * Truncate Text
   */
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /**
   * Line Clamp
   * Truncate text to specific number of lines
   */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
