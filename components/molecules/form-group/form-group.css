/* components/molecules/form-group/form-group.css */

/**
 * Form Group Component Styles (Molecule)
 *
 * Complete form field combining label + input + validation message + help text.
 * Critical for accessible forms and reducing form friction by 50%+.
 *
 * Component-scoped naming convention (NOT BEM):
 * - Base: .form-group
 * - Children: .form-group-label, .form-group-help, .form-group-error
 * - Variants: .form-group-horizontal
 * - States: .form-group--error, .form-group--success
 *
 * Pure CSS only - no preprocessors.
 * Performance target: <400B gzipped
 */

@layer components {
  /* ============================================
     Base Component Styles
     ============================================ */
  .form-group {
    /* Component-specific custom properties */
    --form-group-gap: var(--spacing-xs);
    --form-group-label-size: var(--font-size-sm);
    --form-group-label-weight: var(--font-weight-medium);
    --form-group-label-color: var(--color-text);
    --form-group-help-size: var(--font-size-sm);
    --form-group-help-color: var(--color-text-muted);
    --form-group-error-color: var(--color-error);
    --form-group-success-color: var(--color-success);
    --form-group-warning-color: var(--color-warning);

    /* Layout */
    display: flex;
    flex-direction: column;
    gap: var(--form-group-gap);
    margin-block-end: var(--spacing-md);
  }

  /* ============================================
     Label
     ============================================ */
  .form-group-label {
    display: block;
    font-size: var(--form-group-label-size);
    font-weight: var(--form-group-label-weight);
    color: var(--form-group-label-color);
    line-height: var(--line-height-snug);
    cursor: pointer;
  }

  /* Required indicator */
  .form-group-required {
    color: var(--form-group-error-color);
    margin-inline-start: 0.25rem;
  }

  /* Optional indicator */
  .form-group-optional {
    font-weight: var(--font-weight-normal);
    color: var(--form-group-help-color);
    margin-inline-start: 0.25rem;
  }

  /* ============================================
     Help Text
     ============================================ */
  .form-group-help {
    margin: 0;
    font-size: var(--form-group-help-size);
    color: var(--form-group-help-color);
    line-height: var(--line-height-normal);
  }

  /* ============================================
     Error Message
     ============================================ */
  .form-group-error {
    margin: 0;
    font-size: var(--form-group-help-size);
    color: var(--form-group-error-color);
    line-height: var(--line-height-normal);
  }

  .form-group-error[hidden] {
    display: none;
  }

  /* ============================================
     Success Message
     ============================================ */
  .form-group-success {
    margin: 0;
    font-size: var(--form-group-help-size);
    color: var(--form-group-success-color);
    line-height: var(--line-height-normal);
  }

  .form-group-success[hidden] {
    display: none;
  }

  /* ============================================
     Warning Message
     ============================================ */
  .form-group-warning {
    margin: 0;
    font-size: var(--form-group-help-size);
    color: var(--form-group-warning-color);
    line-height: var(--line-height-normal);
  }

  .form-group-warning[hidden] {
    display: none;
  }

  /* ============================================
     Character Count
     ============================================ */
  .form-group-count {
    margin: 0;
    font-size: var(--form-group-help-size);
    color: var(--form-group-help-color);
    text-align: end;
    line-height: var(--line-height-normal);
  }

  .form-group-count-current {
    font-weight: var(--font-weight-medium);
  }

  /* ============================================
     Horizontal Layout Variant
     ============================================ */
  .form-group-horizontal {
    flex-direction: row;
    align-items: flex-start;
    gap: var(--spacing-md);
  }

  .form-group-horizontal .form-group-label {
    flex: 0 0 10rem;
    padding-block-start: 0.625rem; /* Align with input text */
  }

  .form-group-horizontal .form-group-field {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--form-group-gap);
  }

  /* ============================================
     State Variants
     ============================================ */
  .form-group--error .form-group-label {
    color: var(--form-group-error-color);
  }

  .form-group--success .form-group-label {
    color: var(--form-group-success-color);
  }

  .form-group--warning .form-group-label {
    color: var(--form-group-warning-color);
  }

  /* ============================================
     Dark Mode
     ============================================ */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .form-group {
      --form-group-label-color: var(--color-gray-100);
      --form-group-help-color: var(--color-gray-400);
    }
  }

  [data-theme="dark"] .form-group {
    --form-group-label-color: var(--color-gray-100);
    --form-group-help-color: var(--color-gray-400);
  }

  /* ============================================
     Responsive Design
     ============================================ */

  /* Mobile: Stack horizontal layout on mobile */
  @media (max-width: 47.99em) {
    .form-group-horizontal {
      flex-direction: column;
      gap: var(--form-group-gap);
    }

    .form-group-horizontal .form-group-label {
      flex: none;
      padding-block-start: 0;
    }
  }

  /* ============================================
     Accessibility
     ============================================ */
  @media (prefers-reduced-motion: reduce) {
    .form-group {
      transition: none;
    }
  }

  @media (prefers-contrast: high) {
    .form-group-label {
      font-weight: var(--font-weight-semibold);
    }

    .form-group-required,
    .form-group-error,
    .form-group-success,
    .form-group-warning {
      font-weight: var(--font-weight-semibold);
    }
  }
}
